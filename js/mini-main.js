var showMap=document.querySelector(".show-map"),fullMap=document.querySelector(".full-map"),closeMap=document.querySelector(".popap-close-map"),showFeedback=document.querySelector(".show-feedback"),feedback=document.querySelector(".popap-feedback"),closeFeedback=document.querySelector(".popap-close-feedback"),form=feedback.querySelector("form"),nameFeedback=feedback.querySelector("[name=contact-name]"),mailFeedback=feedback.querySelector("[name=contact-mail]"),textFeedback=feedback.querySelector("[name=contact-text]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("nameFeedback")}catch(e){isStorageSupport=!1}showMap.addEventListener("click",function(e){e.preventDefault(),fullMap.classList.add("popap-show-map")}),closeMap.addEventListener("click",function(e){e.preventDefault(),fullMap.classList.remove("popap-show-map")}),showFeedback.addEventListener("click",function(e){e.preventDefault(),feedback.classList.add("popap-show-feedback"),localStorage.getItem("nameFeedback")&&localStorage.getItem("mailFeedback")?(nameFeedback.value=localStorage.getItem("nameFeedback"),mailFeedback.value=localStorage.getItem("mailFeedback"),textFeedback.focus()):localStorage.getItem("mailFeedback")?(mailFeedback.value=localStorage.getItem("mailFeedback"),nameFeedback.focus()):localStorage.getItem("nameFeedback")?(nameFeedback.value=localStorage.getItem("nameFeedback"),mailFeedback.focus()):nameFeedback.focus()}),closeFeedback.addEventListener("click",function(e){e.preventDefault(),feedback.classList.remove("popap-show-feedback"),feedback.classList.remove("modal-error")}),form.addEventListener("submit",function(e){nameFeedback.value&&mailFeedback.value&&textFeedback.value?isStorageSupport&&(localStorage.setItem("nameFeedback",nameFeedback.value),localStorage.setItem("mailFeedback",mailFeedback.value)):(e.preventDefault(),feedback.classList.remove("modal-error"),feedback.offsetWidth=feedback.offsetWidth,feedback.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),feedback.classList.contains("popap-show-feedback")?(feedback.classList.remove("popap-show-feedback"),feedback.classList.remove("modal-error")):fullMap.classList.contains("popap-show-map")&&fullMap.classList.remove("popap-show-map"))});
